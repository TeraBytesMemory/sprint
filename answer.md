## STEP1. デプロイ情報
（更新中）
 Herokuを使いました。ただし、実装の都合上、フロントとサーバーのホストが異なっています。
 
 - フロント：https://sprint-bot-chat.herokuapp.com/
 - サーバー：ws://sprint-hack.herokuapp.com/

 フロントとサーバーを分けた理由としては、実装の都合上ポートが２つ必要だったことです。他の手段ではpython3に未対応のようでしたのでこの方法にしました。

 ちなみにフロントはwebsocketの接続先を指定している以外変更はしていません。

## STEP2. 必須機能の実装
デザインパターンを使ったので、スッキリしているところはスッキリしています。GoFのInterpreterパターンを採用したつもりです。

また、ジェネレータを活用したことで、渡されたコマンド１つにつき複数のデータをクライアントに送信しています。この特徴は、特に、実装した独自コマンドで発揮してくれました。

## STEP3. 独自コマンドの実装
- help 実装したコマンドの説明です。
- twitter 実行時の指定した場所でツイートされたツイートを取得する。WebAPIによる実装の都合上、指定した場所の地方や国のツイートも取ってきます。コマンド'bot twitter -h'でコマンドの詳細が読めます。

## 今回の開発に使用した技術
### サーバーサイド
python3.5.1、Twitter API、Google Geocoding API、SQLAlchemy、bottle、webscokets
### データベース
Postgresql

## その他独自実装した内容の説明
### オプション機能
Botのコマンドに、unixライクなオプション機能を実装できるようなモジュールを作成しました。

今回、twitterコマンドに欲しかったオプション機能のみの実装をしたため、オプションの入力は数値(float)とブール値のみ対応しています。

（例）

- 数値をとるようなオプション -n 機能をコマンドに付け加えた場合、 -n 10.1 を引数に渡すと、対応する変数に10.1が代入されます。
- ブール値をとるようなオプション -b 機能をコマンドに付け加えた場合、 -b を引数に渡せば、対応する変数にTrueが、-bをコマンドに含ませない場合はFalseが渡されます。

## その他創意工夫点、アピールポイントなど
python3のyield from文を使うことで、botの発言にリアルタイム性を出せるようにしました。

例えば、本機能であるtwitterコマンドでは、ツイートの収集の開始、終了、取得したツイートのログをクライアントに送信しますが、開始のログの送信から終了・取得したツイートのログの送信に遅延があることがわかります。

また、twitterコマンドにあるunixライクなオプションは、他のbot機能でも付与できるよう、bot機能の抽象クラスのメソッドにしました。

## 補足事項
### twitterコマンドの補足
下記は、コマンド'bot twitter -h'を送信すると、botより返されるメッセージの内容です。twitterコマンドの具体的な説明となります。
>usage: bot twitter [-e] [-h] [-m] [-w] [--admin] [--city] [--country] location ...
>
>Twitter APIとGoogle Maps Geocoding APIを用いて、指定した箇所のツイートを収集する。
>収集する際は、基本的には指定した制限時間内でのツイートを取得して返す。
>
>必要な引数：
>
>        location: 経度,緯度の順番の二つの少数の場合、入力した経度,緯度の位置を中心とした100mの正方形からツイートを探す。
>
>                  また、地名を入力することも可能。入力した地名をGoogle Maps Geocodingで取得した場所のツイートを探す。
>
>                  ex.) bot twitter 139.7528, 35.685175, bot twitter los angles
>
>オプション:
>
>        -e, --expand: 地名を入力した場合はその地域を含むような長方形内のツイートを探す。その長方形のサイズを周囲指定分メートルだけ広く収集できるようになる。（未指定の場合は拡張しない）
>
>        ex.) bot twitter 渋谷 -e 100
>
>        -h, --help: ヘルプコマンド。ツイートの収集は行わない。あとわかりにくくてごめんなさい。
>
>        -m, --meter: 経度,緯度を入力した場合の正方形の大きさ。例えば、-m=100の場合は100mの正方形からツイートを探す。
>
>                     (未指定の場合は100になる) ex.) bot twitter -m 200 139.7528, 35.685175
>
>        -w, --wait: このオプションで指定した時間以内でツイートを取得する。未指定の場合は5秒以内でツイートを探す。指定時間よりもかかる場合もある。
>
>                    ex.) bot twitter los angles -w 30
>
>        --admin, --city, --country: 収集するツイートの属性を制限する。それぞれのオプションを指定した場合、それぞれ admin（県、地方）、city（市）、country（国）の属性を持つツイートのみを返す。ここでいう属性は、TwitterAPIのツイートで指定された場所の種類のことをいう。複数指定可能。
